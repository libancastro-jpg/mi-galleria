{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _expoVirtualEnv = require(_dependencyMap[3], \"expo/virtual/env\");\n  var BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://galleriaapp.preview.emergentagent.com';\n\n  // Callback para manejar logout cuando hay error 401\n  var onUnauthorized = null;\n  var ApiService = /*#__PURE__*/function () {\n    function ApiService() {\n      (0, _classCallCheck.default)(this, ApiService);\n      this.token = null;\n    }\n    return (0, _createClass.default)(ApiService, [{\n      key: \"setToken\",\n      value: function setToken(token) {\n        this.token = token;\n      }\n    }, {\n      key: \"setOnUnauthorized\",\n      value: function setOnUnauthorized(callback) {\n        onUnauthorized = callback;\n      }\n    }, {\n      key: \"request\",\n      value: function () {\n        var _request = (0, _asyncToGenerator.default)(function* (endpoint) {\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var url = `${BASE_URL}/api${endpoint}`;\n          var headers = {\n            'Content-Type': 'application/json',\n            ...(options.headers || {})\n          };\n          if (this.token) {\n            headers['Authorization'] = `Bearer ${this.token}`;\n          }\n          try {\n            var response = yield fetch(url, {\n              ...options,\n              headers\n            });\n\n            // Si es 401 Unauthorized, forzar logout\n            if (response.status === 401) {\n              console.log('Token inválido, forzando logout...');\n              if (onUnauthorized) {\n                onUnauthorized();\n              }\n              throw new Error('Sesión expirada');\n            }\n            var data = yield response.json();\n            if (!response.ok) {\n              throw new Error(data.detail || 'Error en la solicitud');\n            }\n            return data;\n          } catch (error) {\n            if (error.message === 'Network request failed') {\n              throw new Error('Sin conexión a internet');\n            }\n            throw error;\n          }\n        });\n        function request(_x) {\n          return _request.apply(this, arguments);\n        }\n        return request;\n      }()\n    }, {\n      key: \"get\",\n      value: function () {\n        var _get = (0, _asyncToGenerator.default)(function* (endpoint, params) {\n          var url = endpoint;\n          if (params) {\n            var searchParams = new URLSearchParams(params);\n            url = `${endpoint}?${searchParams.toString()}`;\n          }\n          return this.request(url, {\n            method: 'GET'\n          });\n        });\n        function get(_x2, _x3) {\n          return _get.apply(this, arguments);\n        }\n        return get;\n      }()\n    }, {\n      key: \"post\",\n      value: function () {\n        var _post = (0, _asyncToGenerator.default)(function* (endpoint, data) {\n          return this.request(endpoint, {\n            method: 'POST',\n            body: data ? JSON.stringify(data) : undefined\n          });\n        });\n        function post(_x4, _x5) {\n          return _post.apply(this, arguments);\n        }\n        return post;\n      }()\n    }, {\n      key: \"put\",\n      value: function () {\n        var _put = (0, _asyncToGenerator.default)(function* (endpoint, data) {\n          return this.request(endpoint, {\n            method: 'PUT',\n            body: data ? JSON.stringify(data) : undefined\n          });\n        });\n        function put(_x6, _x7) {\n          return _put.apply(this, arguments);\n        }\n        return put;\n      }()\n    }, {\n      key: \"delete\",\n      value: function () {\n        var _delete2 = (0, _asyncToGenerator.default)(function* (endpoint) {\n          return this.request(endpoint, {\n            method: 'DELETE'\n          });\n        });\n        function _delete(_x8) {\n          return _delete2.apply(this, arguments);\n        }\n        return _delete;\n      }()\n    }]);\n  }();\n  var api = new ApiService();\n});","lineCount":150,"map":[[12,2,87,0,"Object"],[12,8,87,0],[12,9,87,0,"defineProperty"],[12,23,87,0],[12,24,87,0,"exports"],[12,31,87,0],[13,4,87,0,"enumerable"],[13,14,87,0],[14,4,87,0,"get"],[14,7,87,0],[14,18,87,0,"get"],[14,19,87,0],[15,6,87,0],[15,13,87,0,"api"],[15,16,87,0],[16,4,87,0],[17,2,87,0],[18,2,87,36],[18,6,87,36,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,87,36],[18,45,87,36,"require"],[18,52,87,36],[18,53,87,36,"_dependencyMap"],[18,67,87,36],[19,2,87,36],[19,6,87,36,"_asyncToGenerator"],[19,23,87,36],[19,26,87,36,"_interopDefault"],[19,41,87,36],[19,42,87,36,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,87,36],[20,2,87,36],[20,6,87,36,"_babelRuntimeHelpersClassCallCheck"],[20,40,87,36],[20,43,87,36,"require"],[20,50,87,36],[20,51,87,36,"_dependencyMap"],[20,65,87,36],[21,2,87,36],[21,6,87,36,"_classCallCheck"],[21,21,87,36],[21,24,87,36,"_interopDefault"],[21,39,87,36],[21,40,87,36,"_babelRuntimeHelpersClassCallCheck"],[21,74,87,36],[22,2,87,36],[22,6,87,36,"_babelRuntimeHelpersCreateClass"],[22,37,87,36],[22,40,87,36,"require"],[22,47,87,36],[22,48,87,36,"_dependencyMap"],[22,62,87,36],[23,2,87,36],[23,6,87,36,"_createClass"],[23,18,87,36],[23,21,87,36,"_interopDefault"],[23,36,87,36],[23,37,87,36,"_babelRuntimeHelpersCreateClass"],[23,68,87,36],[24,2,87,36],[24,6,87,36,"_expoVirtualEnv"],[24,21,87,36],[24,24,87,36,"require"],[24,31,87,36],[24,32,87,36,"_dependencyMap"],[24,46,87,36],[25,2,1,0],[25,6,1,6,"BASE_URL"],[25,14,1,14],[25,17,1,17,"_expoVirtualEnv"],[25,32,1,17],[25,33,1,17,"env"],[25,36,1,17],[25,37,1,17,"EXPO_PUBLIC_BACKEND_URL"],[25,60,1,17],[25,64,1,56],[25,111,1,103],[27,2,3,0],[28,2,4,0],[28,6,4,4,"onUnauthorized"],[28,20,4,39],[28,23,4,42],[28,27,4,46],[29,2,4,47],[29,6,6,6,"ApiService"],[29,16,6,16],[30,4,6,16],[30,13,6,16,"ApiService"],[30,24,6,16],[31,6,6,16],[31,10,6,16,"_classCallCheck"],[31,25,6,16],[31,26,6,16,"default"],[31,33,6,16],[31,41,6,16,"ApiService"],[31,51,6,16],[32,6,6,16],[32,11,7,10,"token"],[32,16,7,15],[32,19,7,33],[32,23,7,37],[33,4,7,37],[34,4,7,37],[34,15,7,37,"_createClass"],[34,27,7,37],[34,28,7,37,"default"],[34,35,7,37],[34,37,7,37,"ApiService"],[34,47,7,37],[35,6,7,37,"key"],[35,9,7,37],[36,6,7,37,"value"],[36,11,7,37],[36,13,9,2],[36,22,9,2,"setToken"],[36,30,9,10,"setToken"],[36,31,9,11,"token"],[36,36,9,31],[36,38,9,33],[37,8,10,4],[37,12,10,8],[37,13,10,9,"token"],[37,18,10,14],[37,21,10,17,"token"],[37,26,10,22],[38,6,11,2],[39,4,11,3],[40,6,11,3,"key"],[40,9,11,3],[41,6,11,3,"value"],[41,11,11,3],[41,13,13,2],[41,22,13,2,"setOnUnauthorized"],[41,39,13,19,"setOnUnauthorized"],[41,40,13,20,"callback"],[41,48,13,40],[41,50,13,42],[42,8,14,4,"onUnauthorized"],[42,22,14,18],[42,25,14,21,"callback"],[42,33,14,29],[43,6,15,2],[44,4,15,3],[45,6,15,3,"key"],[45,9,15,3],[46,6,15,3,"value"],[46,11,15,3],[47,8,15,3],[47,12,15,3,"_request"],[47,20,15,3],[47,27,15,3,"_asyncToGenerator"],[47,44,15,3],[47,45,15,3,"default"],[47,52,15,3],[47,54,17,2],[47,65,17,24,"endpoint"],[47,73,17,40],[47,75,17,69],[48,10,17,69],[48,14,17,42,"options"],[48,21,17,62],[48,24,17,62,"arguments"],[48,33,17,62],[48,34,17,62,"length"],[48,40,17,62],[48,48,17,62,"arguments"],[48,57,17,62],[48,65,17,62,"undefined"],[48,74,17,62],[48,77,17,62,"arguments"],[48,86,17,62],[48,92,17,65],[48,93,17,66],[48,94,17,67],[49,10,18,4],[49,14,18,10,"url"],[49,17,18,13],[49,20,18,16],[49,23,18,19,"BASE_URL"],[49,31,18,27],[49,38,18,34,"endpoint"],[49,46,18,42],[49,48,18,44],[50,10,20,4],[50,14,20,10,"headers"],[50,21,20,30],[50,24,20,33],[51,12,21,6],[51,26,21,20],[51,28,21,22],[51,46,21,40],[52,12,22,6],[52,16,22,10,"options"],[52,23,22,17],[52,24,22,18,"headers"],[52,31,22,25],[52,35,22,29],[52,36,22,30],[52,37,22,31],[53,10,23,4],[53,11,23,5],[54,10,25,4],[54,14,25,8],[54,18,25,12],[54,19,25,13,"token"],[54,24,25,18],[54,26,25,20],[55,12,26,7,"headers"],[55,19,26,14],[55,20,26,42],[55,35,26,57],[55,36,26,58],[55,39,26,61],[55,49,26,71],[55,53,26,75],[55,54,26,76,"token"],[55,59,26,81],[55,61,26,83],[56,10,27,4],[57,10,29,4],[57,14,29,8],[58,12,30,6],[58,16,30,12,"response"],[58,24,30,20],[58,33,30,29,"fetch"],[58,38,30,34],[58,39,30,35,"url"],[58,42,30,38],[58,44,30,40],[59,14,31,8],[59,17,31,11,"options"],[59,24,31,18],[60,14,32,8,"headers"],[61,12,33,6],[61,13,33,7],[61,14,33,8],[63,12,35,6],[64,12,36,6],[64,16,36,10,"response"],[64,24,36,18],[64,25,36,19,"status"],[64,31,36,25],[64,36,36,30],[64,39,36,33],[64,41,36,35],[65,14,37,8,"console"],[65,21,37,15],[65,22,37,16,"log"],[65,25,37,19],[65,26,37,20],[65,62,37,56],[65,63,37,57],[66,14,38,8],[66,18,38,12,"onUnauthorized"],[66,32,38,26],[66,34,38,28],[67,16,39,10,"onUnauthorized"],[67,30,39,24],[67,31,39,25],[67,32,39,26],[68,14,40,8],[69,14,41,8],[69,20,41,14],[69,24,41,18,"Error"],[69,29,41,23],[69,30,41,24],[69,47,41,41],[69,48,41,42],[70,12,42,6],[71,12,44,6],[71,16,44,12,"data"],[71,20,44,16],[71,29,44,25,"response"],[71,37,44,33],[71,38,44,34,"json"],[71,42,44,38],[71,43,44,39],[71,44,44,40],[72,12,46,6],[72,16,46,10],[72,17,46,11,"response"],[72,25,46,19],[72,26,46,20,"ok"],[72,28,46,22],[72,30,46,24],[73,14,47,8],[73,20,47,14],[73,24,47,18,"Error"],[73,29,47,23],[73,30,47,24,"data"],[73,34,47,28],[73,35,47,29,"detail"],[73,41,47,35],[73,45,47,39],[73,68,47,62],[73,69,47,63],[74,12,48,6],[75,12,50,6],[75,19,50,13,"data"],[75,23,50,17],[76,10,51,4],[76,11,51,5],[76,12,51,6],[76,19,51,13,"error"],[76,24,51,23],[76,26,51,25],[77,12,52,6],[77,16,52,10,"error"],[77,21,52,15],[77,22,52,16,"message"],[77,29,52,23],[77,34,52,28],[77,58,52,52],[77,60,52,54],[78,14,53,8],[78,20,53,14],[78,24,53,18,"Error"],[78,29,53,23],[78,30,53,24],[78,55,53,49],[78,56,53,50],[79,12,54,6],[80,12,55,6],[80,18,55,12,"error"],[80,23,55,17],[81,10,56,4],[82,8,57,2],[82,9,57,3],[83,8,57,3],[83,17,17,16,"request"],[83,24,17,23,"request"],[83,25,17,23,"_x"],[83,27,17,23],[84,10,17,23],[84,17,17,23,"_request"],[84,25,17,23],[84,26,17,23,"apply"],[84,31,17,23],[84,38,17,23,"arguments"],[84,47,17,23],[85,8,17,23],[86,8,17,23],[86,15,17,16,"request"],[86,22,17,23],[87,6,17,23],[88,4,17,23],[89,6,17,23,"key"],[89,9,17,23],[90,6,17,23,"value"],[90,11,17,23],[91,8,17,23],[91,12,17,23,"_get"],[91,16,17,23],[91,23,17,23,"_asyncToGenerator"],[91,40,17,23],[91,41,17,23,"default"],[91,48,17,23],[91,50,59,2],[91,61,59,12,"endpoint"],[91,69,59,28],[91,71,59,30,"params"],[91,77,59,61],[91,79,59,63],[92,10,60,4],[92,14,60,8,"url"],[92,17,60,11],[92,20,60,14,"endpoint"],[92,28,60,22],[93,10,61,4],[93,14,61,8,"params"],[93,20,61,14],[93,22,61,16],[94,12,62,6],[94,16,62,12,"searchParams"],[94,28,62,24],[94,31,62,27],[94,35,62,31,"URLSearchParams"],[94,50,62,46],[94,51,62,47,"params"],[94,57,62,53],[94,58,62,54],[95,12,63,6,"url"],[95,15,63,9],[95,18,63,12],[95,21,63,15,"endpoint"],[95,29,63,23],[95,33,63,27,"searchParams"],[95,45,63,39],[95,46,63,40,"toString"],[95,54,63,48],[95,55,63,49],[95,56,63,50],[95,58,63,52],[96,10,64,4],[97,10,65,4],[97,17,65,11],[97,21,65,15],[97,22,65,16,"request"],[97,29,65,23],[97,30,65,24,"url"],[97,33,65,27],[97,35,65,29],[98,12,65,31,"method"],[98,18,65,37],[98,20,65,39],[99,10,65,45],[99,11,65,46],[99,12,65,47],[100,8,66,2],[100,9,66,3],[101,8,66,3],[101,17,59,8,"get"],[101,20,59,11,"get"],[101,21,59,11,"_x2"],[101,24,59,11],[101,26,59,11,"_x3"],[101,29,59,11],[102,10,59,11],[102,17,59,11,"_get"],[102,21,59,11],[102,22,59,11,"apply"],[102,27,59,11],[102,34,59,11,"arguments"],[102,43,59,11],[103,8,59,11],[104,8,59,11],[104,15,59,8,"get"],[104,18,59,11],[105,6,59,11],[106,4,59,11],[107,6,59,11,"key"],[107,9,59,11],[108,6,59,11,"value"],[108,11,59,11],[109,8,59,11],[109,12,59,11,"_post"],[109,17,59,11],[109,24,59,11,"_asyncToGenerator"],[109,41,59,11],[109,42,59,11,"default"],[109,49,59,11],[109,51,68,2],[109,62,68,13,"endpoint"],[109,70,68,29],[109,72,68,31,"data"],[109,76,68,41],[109,78,68,43],[110,10,69,4],[110,17,69,11],[110,21,69,15],[110,22,69,16,"request"],[110,29,69,23],[110,30,69,24,"endpoint"],[110,38,69,32],[110,40,69,34],[111,12,70,6,"method"],[111,18,70,12],[111,20,70,14],[111,26,70,20],[112,12,71,6,"body"],[112,16,71,10],[112,18,71,12,"data"],[112,22,71,16],[112,25,71,19,"JSON"],[112,29,71,23],[112,30,71,24,"stringify"],[112,39,71,33],[112,40,71,34,"data"],[112,44,71,38],[112,45,71,39],[112,48,71,42,"undefined"],[113,10,72,4],[113,11,72,5],[113,12,72,6],[114,8,73,2],[114,9,73,3],[115,8,73,3],[115,17,68,8,"post"],[115,21,68,12,"post"],[115,22,68,12,"_x4"],[115,25,68,12],[115,27,68,12,"_x5"],[115,30,68,12],[116,10,68,12],[116,17,68,12,"_post"],[116,22,68,12],[116,23,68,12,"apply"],[116,28,68,12],[116,35,68,12,"arguments"],[116,44,68,12],[117,8,68,12],[118,8,68,12],[118,15,68,8,"post"],[118,19,68,12],[119,6,68,12],[120,4,68,12],[121,6,68,12,"key"],[121,9,68,12],[122,6,68,12,"value"],[122,11,68,12],[123,8,68,12],[123,12,68,12,"_put"],[123,16,68,12],[123,23,68,12,"_asyncToGenerator"],[123,40,68,12],[123,41,68,12,"default"],[123,48,68,12],[123,50,75,2],[123,61,75,12,"endpoint"],[123,69,75,28],[123,71,75,30,"data"],[123,75,75,40],[123,77,75,42],[124,10,76,4],[124,17,76,11],[124,21,76,15],[124,22,76,16,"request"],[124,29,76,23],[124,30,76,24,"endpoint"],[124,38,76,32],[124,40,76,34],[125,12,77,6,"method"],[125,18,77,12],[125,20,77,14],[125,25,77,19],[126,12,78,6,"body"],[126,16,78,10],[126,18,78,12,"data"],[126,22,78,16],[126,25,78,19,"JSON"],[126,29,78,23],[126,30,78,24,"stringify"],[126,39,78,33],[126,40,78,34,"data"],[126,44,78,38],[126,45,78,39],[126,48,78,42,"undefined"],[127,10,79,4],[127,11,79,5],[127,12,79,6],[128,8,80,2],[128,9,80,3],[129,8,80,3],[129,17,75,8,"put"],[129,20,75,11,"put"],[129,21,75,11,"_x6"],[129,24,75,11],[129,26,75,11,"_x7"],[129,29,75,11],[130,10,75,11],[130,17,75,11,"_put"],[130,21,75,11],[130,22,75,11,"apply"],[130,27,75,11],[130,34,75,11,"arguments"],[130,43,75,11],[131,8,75,11],[132,8,75,11],[132,15,75,8,"put"],[132,18,75,11],[133,6,75,11],[134,4,75,11],[135,6,75,11,"key"],[135,9,75,11],[136,6,75,11,"value"],[136,11,75,11],[137,8,75,11],[137,12,75,11,"_delete2"],[137,20,75,11],[137,27,75,11,"_asyncToGenerator"],[137,44,75,11],[137,45,75,11,"default"],[137,52,75,11],[137,54,82,2],[137,65,82,15,"endpoint"],[137,73,82,31],[137,75,82,33],[138,10,83,4],[138,17,83,11],[138,21,83,15],[138,22,83,16,"request"],[138,29,83,23],[138,30,83,24,"endpoint"],[138,38,83,32],[138,40,83,34],[139,12,83,36,"method"],[139,18,83,42],[139,20,83,44],[140,10,83,53],[140,11,83,54],[140,12,83,55],[141,8,84,2],[141,9,84,3],[142,8,84,3],[142,17,82,8,"delete"],[142,24,82,14,"delete"],[142,25,82,14,"_x8"],[142,28,82,14],[143,10,82,14],[143,17,82,14,"_delete2"],[143,25,82,14],[143,26,82,14,"apply"],[143,31,82,14],[143,38,82,14,"arguments"],[143,47,82,14],[144,8,82,14],[145,8,82,14],[145,15,82,8,"delete"],[145,22,82,14],[146,6,82,14],[147,4,82,14],[148,2,82,14],[149,2,87,7],[149,6,87,13,"api"],[149,9,87,16],[149,12,87,19],[149,16,87,23,"ApiService"],[149,26,87,33],[149,27,87,34],[149,28,87,35],[150,0,87,36],[150,3]],"functionMap":{"names":["<global>","ApiService","ApiService#setToken","ApiService#setOnUnauthorized","ApiService#request","ApiService#get","ApiService#post","ApiService#put","ApiService#_delete"],"mappings":"AAA;ACK;ECG;GDE;EEE;GFE;EGE;GHwC;EIE;GJO;EKE;GLK;EME;GNK;EOE;GPE;CDC"},"hasCjsExports":false},"type":"js/module"}]}