{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.api.setToken(storedToken);\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (telefono, pin) => {\n      try {\n        const response = await _servicesApi.api.post('/auth/login', {\n          telefono,\n          pin\n        });\n        const {\n          access_token,\n          user: userData\n        } = response;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n        _servicesApi.api.setToken(access_token);\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.message || 'Error al iniciar sesiÃ³n');\n      }\n    };\n    const register = async (telefono, pin, email, nombre) => {\n      try {\n        const response = await _servicesApi.api.post('/auth/register', {\n          telefono,\n          pin,\n          email,\n          nombre\n        });\n        const {\n          access_token,\n          user: userData\n        } = response;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n        _servicesApi.api.setToken(access_token);\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.message || 'Error al registrarse');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n      _servicesApi.api.setToken(null);\n      setToken(null);\n      setUser(null);\n    };\n    const updateProfile = async data => {\n      try {\n        await _servicesApi.api.put('/auth/profile', data);\n        if (user) {\n          const updatedUser = {\n            ...user,\n            ...data\n          };\n          setUser(updatedUser);\n          await AsyncStorage.default.setItem('auth_user', JSON.stringify(updatedUser));\n        }\n      } catch (error) {\n        throw new Error(error.message || 'Error al actualizar perfil');\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isAuthenticated: !!token,\n        isLoading,\n        login,\n        register,\n        logout,\n        updateProfile\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":132,"map":[[13,2,26,0,"exports"],[13,9,26,0],[13,10,26,0,"AuthProvider"],[13,22,26,0],[13,25,26,0,"AuthProvider"],[13,37,26,0],[14,2,123,0,"exports"],[14,9,123,0],[14,10,123,0,"useAuth"],[14,17,123,0],[14,20,123,0,"useAuth"],[14,27,123,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_servicesApi"],[18,18,3,0],[18,21,3,0,"require"],[18,28,3,0],[18,29,3,0,"_dependencyMap"],[18,43,3,0],[19,2,3,38],[19,6,3,38,"_reactJsxDevRuntime"],[19,25,3,38],[19,28,3,38,"require"],[19,35,3,38],[19,36,3,38,"_dependencyMap"],[19,50,3,38],[20,2,24,0],[20,8,24,6,"AuthContext"],[20,19,24,17],[20,35,24,20],[20,39,24,20,"createContext"],[20,45,24,33],[20,46,24,33,"createContext"],[20,59,24,33],[20,61,24,63,"undefined"],[20,70,24,72],[20,71,24,73],[21,2,26,7],[21,11,26,16,"AuthProvider"],[21,23,26,28,"AuthProvider"],[21,24,26,29],[22,4,26,31,"children"],[23,2,26,65],[23,3,26,66],[23,5,26,68],[24,4,27,2],[24,10,27,8],[24,11,27,9,"user"],[24,15,27,13],[24,17,27,15,"setUser"],[24,24,27,22],[24,25,27,23],[24,28,27,26],[24,32,27,26,"useState"],[24,38,27,34],[24,39,27,34,"useState"],[24,47,27,34],[24,49,27,48],[24,53,27,52],[24,54,27,53],[25,4,28,2],[25,10,28,8],[25,11,28,9,"token"],[25,16,28,14],[25,18,28,16,"setToken"],[25,26,28,24],[25,27,28,25],[25,30,28,28],[25,34,28,28,"useState"],[25,40,28,36],[25,41,28,36,"useState"],[25,49,28,36],[25,51,28,52],[25,55,28,56],[25,56,28,57],[26,4,29,2],[26,10,29,8],[26,11,29,9,"isLoading"],[26,20,29,18],[26,22,29,20,"setIsLoading"],[26,34,29,32],[26,35,29,33],[26,38,29,36],[26,42,29,36,"useState"],[26,48,29,44],[26,49,29,44,"useState"],[26,57,29,44],[26,59,29,45],[26,63,29,49],[26,64,29,50],[27,4,31,2],[27,8,31,2,"useEffect"],[27,14,31,11],[27,15,31,11,"useEffect"],[27,24,31,11],[27,26,31,12],[27,32,31,18],[28,6,32,4,"loadStoredAuth"],[28,20,32,18],[28,21,32,19],[28,22,32,20],[29,4,33,2],[29,5,33,3],[29,7,33,5],[29,9,33,7],[29,10,33,8],[30,4,35,2],[30,10,35,8,"loadStoredAuth"],[30,24,35,22],[30,27,35,25],[30,33,35,25,"loadStoredAuth"],[30,34,35,25],[30,39,35,37],[31,6,36,4],[31,10,36,8],[32,8,37,6],[32,14,37,12,"storedToken"],[32,25,37,23],[32,28,37,26],[32,34,37,32,"AsyncStorage"],[32,46,37,44],[32,47,37,44,"default"],[32,54,37,44],[32,55,37,45,"getItem"],[32,62,37,52],[32,63,37,53],[32,75,37,65],[32,76,37,66],[33,8,38,6],[33,14,38,12,"storedUser"],[33,24,38,22],[33,27,38,25],[33,33,38,31,"AsyncStorage"],[33,45,38,43],[33,46,38,43,"default"],[33,53,38,43],[33,54,38,44,"getItem"],[33,61,38,51],[33,62,38,52],[33,73,38,63],[33,74,38,64],[34,8,40,6],[34,12,40,10,"storedToken"],[34,23,40,21],[34,27,40,25,"storedUser"],[34,37,40,35],[34,39,40,37],[35,10,41,8,"setToken"],[35,18,41,16],[35,19,41,17,"storedToken"],[35,30,41,28],[35,31,41,29],[36,10,42,8,"setUser"],[36,17,42,15],[36,18,42,16,"JSON"],[36,22,42,20],[36,23,42,21,"parse"],[36,28,42,26],[36,29,42,27,"storedUser"],[36,39,42,37],[36,40,42,38],[36,41,42,39],[37,10,43,8,"api"],[37,22,43,11],[37,23,43,11,"api"],[37,26,43,11],[37,27,43,12,"setToken"],[37,35,43,20],[37,36,43,21,"storedToken"],[37,47,43,32],[37,48,43,33],[38,8,44,6],[39,6,45,4],[39,7,45,5],[39,8,45,6],[39,15,45,13,"error"],[39,20,45,18],[39,22,45,20],[40,8,46,6,"console"],[40,15,46,13],[40,16,46,14,"error"],[40,21,46,19],[40,22,46,20],[40,43,46,41],[40,45,46,43,"error"],[40,50,46,48],[40,51,46,49],[41,6,47,4],[41,7,47,5],[41,16,47,14],[42,8,48,6,"setIsLoading"],[42,20,48,18],[42,21,48,19],[42,26,48,24],[42,27,48,25],[43,6,49,4],[44,4,50,2],[44,5,50,3],[45,4,52,2],[45,10,52,8,"login"],[45,15,52,13],[45,18,52,16],[45,24,52,16,"login"],[45,25,52,23,"telefono"],[45,33,52,39],[45,35,52,41,"pin"],[45,38,52,52],[45,43,52,57],[46,6,53,4],[46,10,53,8],[47,8,54,6],[47,14,54,12,"response"],[47,22,54,20],[47,25,54,23],[47,31,54,29,"api"],[47,43,54,32],[47,44,54,32,"api"],[47,47,54,32],[47,48,54,33,"post"],[47,52,54,37],[47,53,54,38],[47,66,54,51],[47,68,54,53],[48,10,54,55,"telefono"],[48,18,54,63],[49,10,54,65,"pin"],[50,8,54,69],[50,9,54,70],[50,10,54,71],[51,8,55,6],[51,14,55,12],[52,10,55,14,"access_token"],[52,22,55,26],[53,10,55,28,"user"],[53,14,55,32],[53,16,55,34,"userData"],[54,8,55,43],[54,9,55,44],[54,12,55,47,"response"],[54,20,55,55],[55,8,57,6],[55,14,57,12,"AsyncStorage"],[55,26,57,24],[55,27,57,24,"default"],[55,34,57,24],[55,35,57,25,"setItem"],[55,42,57,32],[55,43,57,33],[55,55,57,45],[55,57,57,47,"access_token"],[55,69,57,59],[55,70,57,60],[56,8,58,6],[56,14,58,12,"AsyncStorage"],[56,26,58,24],[56,27,58,24,"default"],[56,34,58,24],[56,35,58,25,"setItem"],[56,42,58,32],[56,43,58,33],[56,54,58,44],[56,56,58,46,"JSON"],[56,60,58,50],[56,61,58,51,"stringify"],[56,70,58,60],[56,71,58,61,"userData"],[56,79,58,69],[56,80,58,70],[56,81,58,71],[57,8,60,6,"api"],[57,20,60,9],[57,21,60,9,"api"],[57,24,60,9],[57,25,60,10,"setToken"],[57,33,60,18],[57,34,60,19,"access_token"],[57,46,60,31],[57,47,60,32],[58,8,61,6,"setToken"],[58,16,61,14],[58,17,61,15,"access_token"],[58,29,61,27],[58,30,61,28],[59,8,62,6,"setUser"],[59,15,62,13],[59,16,62,14,"userData"],[59,24,62,22],[59,25,62,23],[60,6,63,4],[60,7,63,5],[60,8,63,6],[60,15,63,13,"error"],[60,20,63,23],[60,22,63,25],[61,8,64,6],[61,14,64,12],[61,18,64,16,"Error"],[61,23,64,21],[61,24,64,22,"error"],[61,29,64,27],[61,30,64,28,"message"],[61,37,64,35],[61,41,64,39],[61,66,64,64],[61,67,64,65],[62,6,65,4],[63,4,66,2],[63,5,66,3],[64,4,68,2],[64,10,68,8,"register"],[64,18,68,16],[64,21,68,19],[64,27,68,19,"register"],[64,28,68,26,"telefono"],[64,36,68,42],[64,38,68,44,"pin"],[64,41,68,55],[64,43,68,57,"email"],[64,48,68,71],[64,50,68,73,"nombre"],[64,56,68,88],[64,61,68,93],[65,6,69,4],[65,10,69,8],[66,8,70,6],[66,14,70,12,"response"],[66,22,70,20],[66,25,70,23],[66,31,70,29,"api"],[66,43,70,32],[66,44,70,32,"api"],[66,47,70,32],[66,48,70,33,"post"],[66,52,70,37],[66,53,70,38],[66,69,70,54],[66,71,70,56],[67,10,70,58,"telefono"],[67,18,70,66],[68,10,70,68,"pin"],[68,13,70,71],[69,10,70,73,"email"],[69,15,70,78],[70,10,70,80,"nombre"],[71,8,70,87],[71,9,70,88],[71,10,70,89],[72,8,71,6],[72,14,71,12],[73,10,71,14,"access_token"],[73,22,71,26],[74,10,71,28,"user"],[74,14,71,32],[74,16,71,34,"userData"],[75,8,71,43],[75,9,71,44],[75,12,71,47,"response"],[75,20,71,55],[76,8,73,6],[76,14,73,12,"AsyncStorage"],[76,26,73,24],[76,27,73,24,"default"],[76,34,73,24],[76,35,73,25,"setItem"],[76,42,73,32],[76,43,73,33],[76,55,73,45],[76,57,73,47,"access_token"],[76,69,73,59],[76,70,73,60],[77,8,74,6],[77,14,74,12,"AsyncStorage"],[77,26,74,24],[77,27,74,24,"default"],[77,34,74,24],[77,35,74,25,"setItem"],[77,42,74,32],[77,43,74,33],[77,54,74,44],[77,56,74,46,"JSON"],[77,60,74,50],[77,61,74,51,"stringify"],[77,70,74,60],[77,71,74,61,"userData"],[77,79,74,69],[77,80,74,70],[77,81,74,71],[78,8,76,6,"api"],[78,20,76,9],[78,21,76,9,"api"],[78,24,76,9],[78,25,76,10,"setToken"],[78,33,76,18],[78,34,76,19,"access_token"],[78,46,76,31],[78,47,76,32],[79,8,77,6,"setToken"],[79,16,77,14],[79,17,77,15,"access_token"],[79,29,77,27],[79,30,77,28],[80,8,78,6,"setUser"],[80,15,78,13],[80,16,78,14,"userData"],[80,24,78,22],[80,25,78,23],[81,6,79,4],[81,7,79,5],[81,8,79,6],[81,15,79,13,"error"],[81,20,79,23],[81,22,79,25],[82,8,80,6],[82,14,80,12],[82,18,80,16,"Error"],[82,23,80,21],[82,24,80,22,"error"],[82,29,80,27],[82,30,80,28,"message"],[82,37,80,35],[82,41,80,39],[82,63,80,61],[82,64,80,62],[83,6,81,4],[84,4,82,2],[84,5,82,3],[85,4,84,2],[85,10,84,8,"logout"],[85,16,84,14],[85,19,84,17],[85,25,84,17,"logout"],[85,26,84,17],[85,31,84,29],[86,6,85,4],[86,12,85,10,"AsyncStorage"],[86,24,85,22],[86,25,85,22,"default"],[86,32,85,22],[86,33,85,23,"removeItem"],[86,43,85,33],[86,44,85,34],[86,56,85,46],[86,57,85,47],[87,6,86,4],[87,12,86,10,"AsyncStorage"],[87,24,86,22],[87,25,86,22,"default"],[87,32,86,22],[87,33,86,23,"removeItem"],[87,43,86,33],[87,44,86,34],[87,55,86,45],[87,56,86,46],[88,6,87,4,"api"],[88,18,87,7],[88,19,87,7,"api"],[88,22,87,7],[88,23,87,8,"setToken"],[88,31,87,16],[88,32,87,17],[88,36,87,21],[88,37,87,22],[89,6,88,4,"setToken"],[89,14,88,12],[89,15,88,13],[89,19,88,17],[89,20,88,18],[90,6,89,4,"setUser"],[90,13,89,11],[90,14,89,12],[90,18,89,16],[90,19,89,17],[91,4,90,2],[91,5,90,3],[92,4,92,2],[92,10,92,8,"updateProfile"],[92,23,92,21],[92,26,92,24],[92,32,92,31,"data"],[92,36,92,72],[92,40,92,77],[93,6,93,4],[93,10,93,8],[94,8,94,6],[94,14,94,12,"api"],[94,26,94,15],[94,27,94,15,"api"],[94,30,94,15],[94,31,94,16,"put"],[94,34,94,19],[94,35,94,20],[94,50,94,35],[94,52,94,37,"data"],[94,56,94,41],[94,57,94,42],[95,8,95,6],[95,12,95,10,"user"],[95,16,95,14],[95,18,95,16],[96,10,96,8],[96,16,96,14,"updatedUser"],[96,27,96,25],[96,30,96,28],[97,12,96,30],[97,15,96,33,"user"],[97,19,96,37],[98,12,96,39],[98,15,96,42,"data"],[99,10,96,47],[99,11,96,48],[100,10,97,8,"setUser"],[100,17,97,15],[100,18,97,16,"updatedUser"],[100,29,97,27],[100,30,97,28],[101,10,98,8],[101,16,98,14,"AsyncStorage"],[101,28,98,26],[101,29,98,26,"default"],[101,36,98,26],[101,37,98,27,"setItem"],[101,44,98,34],[101,45,98,35],[101,56,98,46],[101,58,98,48,"JSON"],[101,62,98,52],[101,63,98,53,"stringify"],[101,72,98,62],[101,73,98,63,"updatedUser"],[101,84,98,74],[101,85,98,75],[101,86,98,76],[102,8,99,6],[103,6,100,4],[103,7,100,5],[103,8,100,6],[103,15,100,13,"error"],[103,20,100,23],[103,22,100,25],[104,8,101,6],[104,14,101,12],[104,18,101,16,"Error"],[104,23,101,21],[104,24,101,22,"error"],[104,29,101,27],[104,30,101,28,"message"],[104,37,101,35],[104,41,101,39],[104,69,101,67],[104,70,101,68],[105,6,102,4],[106,4,103,2],[106,5,103,3],[107,4,105,2],[107,24,106,4],[107,28,106,4,"_reactJsxDevRuntime"],[107,47,106,4],[107,48,106,4,"jsxDEV"],[107,54,106,4],[107,56,106,5,"AuthContext"],[107,67,106,16],[107,68,106,17,"Provider"],[107,76,106,25],[108,6,107,6,"value"],[108,11,107,11],[108,13,107,13],[109,8,108,8,"user"],[109,12,108,12],[110,8,109,8,"token"],[110,13,109,13],[111,8,110,8,"isAuthenticated"],[111,23,110,23],[111,25,110,25],[111,26,110,26],[111,27,110,27,"token"],[111,32,110,32],[112,8,111,8,"isLoading"],[112,17,111,17],[113,8,112,8,"login"],[113,13,112,13],[114,8,113,8,"register"],[114,16,113,16],[115,8,114,8,"logout"],[115,14,114,14],[116,8,115,8,"updateProfile"],[117,6,116,6],[117,7,116,8],[118,6,116,8,"children"],[118,14,116,8],[118,16,118,7,"children"],[119,4,118,15],[120,6,118,15,"fileName"],[120,14,118,15],[120,16,118,15,"_jsxFileName"],[120,28,118,15],[121,6,118,15,"lineNumber"],[121,16,118,15],[122,6,118,15,"columnNumber"],[122,18,118,15],[123,4,118,15],[123,11,119,26],[123,12,119,27],[124,2,121,0],[125,2,123,7],[125,11,123,16,"useAuth"],[125,18,123,23,"useAuth"],[125,19,123,23],[125,21,123,26],[126,4,124,2],[126,10,124,8,"context"],[126,17,124,15],[126,20,124,18],[126,24,124,18,"useContext"],[126,30,124,28],[126,31,124,28,"useContext"],[126,41,124,28],[126,43,124,29,"AuthContext"],[126,54,124,40],[126,55,124,41],[127,4,125,2],[127,8,125,6],[127,9,125,7,"context"],[127,16,125,14],[127,18,125,16],[128,6,126,4],[128,12,126,10],[128,16,126,14,"Error"],[128,21,126,19],[128,22,126,20],[128,64,126,62],[128,65,126,63],[129,4,127,2],[130,4,128,2],[130,11,128,9,"context"],[130,18,128,16],[131,2,129,0],[132,0,129,1],[132,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","updateProfile","useAuth"],"mappings":"AAA;OCyB;YCK;GDE;yBEE;GFe;gBGE;GHc;mBIE;GJc;iBKE;GLM;wBME;GNW;CDkB;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}