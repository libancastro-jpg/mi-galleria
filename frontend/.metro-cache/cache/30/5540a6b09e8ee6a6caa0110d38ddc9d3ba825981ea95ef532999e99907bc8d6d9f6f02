{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.api.setToken(storedToken);\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (telefono, pin) => {\n      try {\n        const response = await _servicesApi.api.post('/auth/login', {\n          telefono,\n          pin\n        });\n        const {\n          access_token,\n          user: userData\n        } = response;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n        _servicesApi.api.setToken(access_token);\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.message || 'Error al iniciar sesiÃ³n');\n      }\n    };\n    const register = async (telefono, pin, email, nombre) => {\n      try {\n        const response = await _servicesApi.api.post('/auth/register', {\n          telefono,\n          pin,\n          email,\n          nombre\n        });\n        const {\n          access_token,\n          user: userData\n        } = response;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n        _servicesApi.api.setToken(access_token);\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.message || 'Error al registrarse');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n      _servicesApi.api.setToken(null);\n      setToken(null);\n      setUser(null);\n    };\n    const updateProfile = async data => {\n      try {\n        await _servicesApi.api.put('/auth/profile', data);\n        if (user) {\n          const updatedUser = Object.assign({}, user, data);\n          setUser(updatedUser);\n          await AsyncStorage.default.setItem('auth_user', JSON.stringify(updatedUser));\n        }\n      } catch (error) {\n        throw new Error(error.message || 'Error al actualizar perfil');\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isAuthenticated: !!token,\n        isLoading,\n        login,\n        register,\n        logout,\n        updateProfile\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":138,"map":[[15,2,26,0,"exports"],[15,9,26,0],[15,10,26,0,"AuthProvider"],[15,22,26,0],[15,25,26,0,"AuthProvider"],[15,37,26,0],[16,2,123,0,"exports"],[16,9,123,0],[16,10,123,0,"useAuth"],[16,17,123,0],[16,20,123,0,"useAuth"],[16,27,123,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesApi"],[20,18,3,0],[20,21,3,0,"require"],[20,28,3,0],[20,29,3,0,"_dependencyMap"],[20,43,3,0],[21,2,3,38],[21,6,3,38,"_reactJsxDevRuntime"],[21,25,3,38],[21,28,3,38,"require"],[21,35,3,38],[21,36,3,38,"_dependencyMap"],[21,50,3,38],[22,2,24,0],[22,8,24,6,"AuthContext"],[22,19,24,17],[22,35,24,20],[22,39,24,20,"createContext"],[22,45,24,33],[22,46,24,33,"createContext"],[22,59,24,33],[22,61,24,63,"undefined"],[22,70,24,72],[22,71,24,73],[23,2,26,7],[23,11,26,16,"AuthProvider"],[23,23,26,28,"AuthProvider"],[23,24,26,29],[24,4,26,31,"children"],[25,2,26,65],[25,3,26,66],[25,5,26,68],[26,4,26,68,"_s"],[26,6,26,68],[27,4,27,2],[27,10,27,8],[27,11,27,9,"user"],[27,15,27,13],[27,17,27,15,"setUser"],[27,24,27,22],[27,25,27,23],[27,28,27,26],[27,32,27,26,"useState"],[27,38,27,34],[27,39,27,34,"useState"],[27,47,27,34],[27,49,27,48],[27,53,27,52],[27,54,27,53],[28,4,28,2],[28,10,28,8],[28,11,28,9,"token"],[28,16,28,14],[28,18,28,16,"setToken"],[28,26,28,24],[28,27,28,25],[28,30,28,28],[28,34,28,28,"useState"],[28,40,28,36],[28,41,28,36,"useState"],[28,49,28,36],[28,51,28,52],[28,55,28,56],[28,56,28,57],[29,4,29,2],[29,10,29,8],[29,11,29,9,"isLoading"],[29,20,29,18],[29,22,29,20,"setIsLoading"],[29,34,29,32],[29,35,29,33],[29,38,29,36],[29,42,29,36,"useState"],[29,48,29,44],[29,49,29,44,"useState"],[29,57,29,44],[29,59,29,45],[29,63,29,49],[29,64,29,50],[30,4,31,2],[30,8,31,2,"useEffect"],[30,14,31,11],[30,15,31,11,"useEffect"],[30,24,31,11],[30,26,31,12],[30,32,31,18],[31,6,32,4,"loadStoredAuth"],[31,20,32,18],[31,21,32,19],[31,22,32,20],[32,4,33,2],[32,5,33,3],[32,7,33,5],[32,9,33,7],[32,10,33,8],[33,4,35,2],[33,10,35,8,"loadStoredAuth"],[33,24,35,22],[33,27,35,25],[33,33,35,25,"loadStoredAuth"],[33,34,35,25],[33,39,35,37],[34,6,36,4],[34,10,36,8],[35,8,37,6],[35,14,37,12,"storedToken"],[35,25,37,23],[35,28,37,26],[35,34,37,32,"AsyncStorage"],[35,46,37,44],[35,47,37,44,"default"],[35,54,37,44],[35,55,37,45,"getItem"],[35,62,37,52],[35,63,37,53],[35,75,37,65],[35,76,37,66],[36,8,38,6],[36,14,38,12,"storedUser"],[36,24,38,22],[36,27,38,25],[36,33,38,31,"AsyncStorage"],[36,45,38,43],[36,46,38,43,"default"],[36,53,38,43],[36,54,38,44,"getItem"],[36,61,38,51],[36,62,38,52],[36,73,38,63],[36,74,38,64],[37,8,40,6],[37,12,40,10,"storedToken"],[37,23,40,21],[37,27,40,25,"storedUser"],[37,37,40,35],[37,39,40,37],[38,10,41,8,"setToken"],[38,18,41,16],[38,19,41,17,"storedToken"],[38,30,41,28],[38,31,41,29],[39,10,42,8,"setUser"],[39,17,42,15],[39,18,42,16,"JSON"],[39,22,42,20],[39,23,42,21,"parse"],[39,28,42,26],[39,29,42,27,"storedUser"],[39,39,42,37],[39,40,42,38],[39,41,42,39],[40,10,43,8,"api"],[40,22,43,11],[40,23,43,11,"api"],[40,26,43,11],[40,27,43,12,"setToken"],[40,35,43,20],[40,36,43,21,"storedToken"],[40,47,43,32],[40,48,43,33],[41,8,44,6],[42,6,45,4],[42,7,45,5],[42,8,45,6],[42,15,45,13,"error"],[42,20,45,18],[42,22,45,20],[43,8,46,6,"console"],[43,15,46,13],[43,16,46,14,"error"],[43,21,46,19],[43,22,46,20],[43,43,46,41],[43,45,46,43,"error"],[43,50,46,48],[43,51,46,49],[44,6,47,4],[44,7,47,5],[44,16,47,14],[45,8,48,6,"setIsLoading"],[45,20,48,18],[45,21,48,19],[45,26,48,24],[45,27,48,25],[46,6,49,4],[47,4,50,2],[47,5,50,3],[48,4,52,2],[48,10,52,8,"login"],[48,15,52,13],[48,18,52,16],[48,24,52,16,"login"],[48,25,52,23,"telefono"],[48,33,52,39],[48,35,52,41,"pin"],[48,38,52,52],[48,43,52,57],[49,6,53,4],[49,10,53,8],[50,8,54,6],[50,14,54,12,"response"],[50,22,54,20],[50,25,54,23],[50,31,54,29,"api"],[50,43,54,32],[50,44,54,32,"api"],[50,47,54,32],[50,48,54,33,"post"],[50,52,54,37],[50,53,54,38],[50,66,54,51],[50,68,54,53],[51,10,54,55,"telefono"],[51,18,54,63],[52,10,54,65,"pin"],[53,8,54,69],[53,9,54,70],[53,10,54,71],[54,8,55,6],[54,14,55,12],[55,10,55,14,"access_token"],[55,22,55,26],[56,10,55,28,"user"],[56,14,55,32],[56,16,55,34,"userData"],[57,8,55,43],[57,9,55,44],[57,12,55,47,"response"],[57,20,55,55],[58,8,57,6],[58,14,57,12,"AsyncStorage"],[58,26,57,24],[58,27,57,24,"default"],[58,34,57,24],[58,35,57,25,"setItem"],[58,42,57,32],[58,43,57,33],[58,55,57,45],[58,57,57,47,"access_token"],[58,69,57,59],[58,70,57,60],[59,8,58,6],[59,14,58,12,"AsyncStorage"],[59,26,58,24],[59,27,58,24,"default"],[59,34,58,24],[59,35,58,25,"setItem"],[59,42,58,32],[59,43,58,33],[59,54,58,44],[59,56,58,46,"JSON"],[59,60,58,50],[59,61,58,51,"stringify"],[59,70,58,60],[59,71,58,61,"userData"],[59,79,58,69],[59,80,58,70],[59,81,58,71],[60,8,60,6,"api"],[60,20,60,9],[60,21,60,9,"api"],[60,24,60,9],[60,25,60,10,"setToken"],[60,33,60,18],[60,34,60,19,"access_token"],[60,46,60,31],[60,47,60,32],[61,8,61,6,"setToken"],[61,16,61,14],[61,17,61,15,"access_token"],[61,29,61,27],[61,30,61,28],[62,8,62,6,"setUser"],[62,15,62,13],[62,16,62,14,"userData"],[62,24,62,22],[62,25,62,23],[63,6,63,4],[63,7,63,5],[63,8,63,6],[63,15,63,13,"error"],[63,20,63,23],[63,22,63,25],[64,8,64,6],[64,14,64,12],[64,18,64,16,"Error"],[64,23,64,21],[64,24,64,22,"error"],[64,29,64,27],[64,30,64,28,"message"],[64,37,64,35],[64,41,64,39],[64,66,64,64],[64,67,64,65],[65,6,65,4],[66,4,66,2],[66,5,66,3],[67,4,68,2],[67,10,68,8,"register"],[67,18,68,16],[67,21,68,19],[67,27,68,19,"register"],[67,28,68,26,"telefono"],[67,36,68,42],[67,38,68,44,"pin"],[67,41,68,55],[67,43,68,57,"email"],[67,48,68,71],[67,50,68,73,"nombre"],[67,56,68,88],[67,61,68,93],[68,6,69,4],[68,10,69,8],[69,8,70,6],[69,14,70,12,"response"],[69,22,70,20],[69,25,70,23],[69,31,70,29,"api"],[69,43,70,32],[69,44,70,32,"api"],[69,47,70,32],[69,48,70,33,"post"],[69,52,70,37],[69,53,70,38],[69,69,70,54],[69,71,70,56],[70,10,70,58,"telefono"],[70,18,70,66],[71,10,70,68,"pin"],[71,13,70,71],[72,10,70,73,"email"],[72,15,70,78],[73,10,70,80,"nombre"],[74,8,70,87],[74,9,70,88],[74,10,70,89],[75,8,71,6],[75,14,71,12],[76,10,71,14,"access_token"],[76,22,71,26],[77,10,71,28,"user"],[77,14,71,32],[77,16,71,34,"userData"],[78,8,71,43],[78,9,71,44],[78,12,71,47,"response"],[78,20,71,55],[79,8,73,6],[79,14,73,12,"AsyncStorage"],[79,26,73,24],[79,27,73,24,"default"],[79,34,73,24],[79,35,73,25,"setItem"],[79,42,73,32],[79,43,73,33],[79,55,73,45],[79,57,73,47,"access_token"],[79,69,73,59],[79,70,73,60],[80,8,74,6],[80,14,74,12,"AsyncStorage"],[80,26,74,24],[80,27,74,24,"default"],[80,34,74,24],[80,35,74,25,"setItem"],[80,42,74,32],[80,43,74,33],[80,54,74,44],[80,56,74,46,"JSON"],[80,60,74,50],[80,61,74,51,"stringify"],[80,70,74,60],[80,71,74,61,"userData"],[80,79,74,69],[80,80,74,70],[80,81,74,71],[81,8,76,6,"api"],[81,20,76,9],[81,21,76,9,"api"],[81,24,76,9],[81,25,76,10,"setToken"],[81,33,76,18],[81,34,76,19,"access_token"],[81,46,76,31],[81,47,76,32],[82,8,77,6,"setToken"],[82,16,77,14],[82,17,77,15,"access_token"],[82,29,77,27],[82,30,77,28],[83,8,78,6,"setUser"],[83,15,78,13],[83,16,78,14,"userData"],[83,24,78,22],[83,25,78,23],[84,6,79,4],[84,7,79,5],[84,8,79,6],[84,15,79,13,"error"],[84,20,79,23],[84,22,79,25],[85,8,80,6],[85,14,80,12],[85,18,80,16,"Error"],[85,23,80,21],[85,24,80,22,"error"],[85,29,80,27],[85,30,80,28,"message"],[85,37,80,35],[85,41,80,39],[85,63,80,61],[85,64,80,62],[86,6,81,4],[87,4,82,2],[87,5,82,3],[88,4,84,2],[88,10,84,8,"logout"],[88,16,84,14],[88,19,84,17],[88,25,84,17,"logout"],[88,26,84,17],[88,31,84,29],[89,6,85,4],[89,12,85,10,"AsyncStorage"],[89,24,85,22],[89,25,85,22,"default"],[89,32,85,22],[89,33,85,23,"removeItem"],[89,43,85,33],[89,44,85,34],[89,56,85,46],[89,57,85,47],[90,6,86,4],[90,12,86,10,"AsyncStorage"],[90,24,86,22],[90,25,86,22,"default"],[90,32,86,22],[90,33,86,23,"removeItem"],[90,43,86,33],[90,44,86,34],[90,55,86,45],[90,56,86,46],[91,6,87,4,"api"],[91,18,87,7],[91,19,87,7,"api"],[91,22,87,7],[91,23,87,8,"setToken"],[91,31,87,16],[91,32,87,17],[91,36,87,21],[91,37,87,22],[92,6,88,4,"setToken"],[92,14,88,12],[92,15,88,13],[92,19,88,17],[92,20,88,18],[93,6,89,4,"setUser"],[93,13,89,11],[93,14,89,12],[93,18,89,16],[93,19,89,17],[94,4,90,2],[94,5,90,3],[95,4,92,2],[95,10,92,8,"updateProfile"],[95,23,92,21],[95,26,92,24],[95,32,92,31,"data"],[95,36,92,72],[95,40,92,77],[96,6,93,4],[96,10,93,8],[97,8,94,6],[97,14,94,12,"api"],[97,26,94,15],[97,27,94,15,"api"],[97,30,94,15],[97,31,94,16,"put"],[97,34,94,19],[97,35,94,20],[97,50,94,35],[97,52,94,37,"data"],[97,56,94,41],[97,57,94,42],[98,8,95,6],[98,12,95,10,"user"],[98,16,95,14],[98,18,95,16],[99,10,96,8],[99,16,96,14,"updatedUser"],[99,27,96,25],[99,30,96,25,"Object"],[99,36,96,25],[99,37,96,25,"assign"],[99,43,96,25],[99,48,96,33,"user"],[99,52,96,37],[99,54,96,42,"data"],[99,58,96,46],[99,59,96,48],[100,10,97,8,"setUser"],[100,17,97,15],[100,18,97,16,"updatedUser"],[100,29,97,27],[100,30,97,28],[101,10,98,8],[101,16,98,14,"AsyncStorage"],[101,28,98,26],[101,29,98,26,"default"],[101,36,98,26],[101,37,98,27,"setItem"],[101,44,98,34],[101,45,98,35],[101,56,98,46],[101,58,98,48,"JSON"],[101,62,98,52],[101,63,98,53,"stringify"],[101,72,98,62],[101,73,98,63,"updatedUser"],[101,84,98,74],[101,85,98,75],[101,86,98,76],[102,8,99,6],[103,6,100,4],[103,7,100,5],[103,8,100,6],[103,15,100,13,"error"],[103,20,100,23],[103,22,100,25],[104,8,101,6],[104,14,101,12],[104,18,101,16,"Error"],[104,23,101,21],[104,24,101,22,"error"],[104,29,101,27],[104,30,101,28,"message"],[104,37,101,35],[104,41,101,39],[104,69,101,67],[104,70,101,68],[105,6,102,4],[106,4,103,2],[106,5,103,3],[107,4,105,2],[107,24,106,4],[107,28,106,4,"_reactJsxDevRuntime"],[107,47,106,4],[107,48,106,4,"jsxDEV"],[107,54,106,4],[107,56,106,5,"AuthContext"],[107,67,106,16],[107,68,106,17,"Provider"],[107,76,106,25],[108,6,107,6,"value"],[108,11,107,11],[108,13,107,13],[109,8,108,8,"user"],[109,12,108,12],[110,8,109,8,"token"],[110,13,109,13],[111,8,110,8,"isAuthenticated"],[111,23,110,23],[111,25,110,25],[111,26,110,26],[111,27,110,27,"token"],[111,32,110,32],[112,8,111,8,"isLoading"],[112,17,111,17],[113,8,112,8,"login"],[113,13,112,13],[114,8,113,8,"register"],[114,16,113,16],[115,8,114,8,"logout"],[115,14,114,14],[116,8,115,8,"updateProfile"],[117,6,116,6],[117,7,116,8],[118,6,116,8,"children"],[118,14,116,8],[118,16,118,7,"children"],[119,4,118,15],[120,6,118,15,"fileName"],[120,14,118,15],[120,16,118,15,"_jsxFileName"],[120,28,118,15],[121,6,118,15,"lineNumber"],[121,16,118,15],[122,6,118,15,"columnNumber"],[122,18,118,15],[123,4,118,15],[123,11,119,26],[123,12,119,27],[124,2,121,0],[125,2,121,1,"_s"],[125,4,121,1],[125,5,26,16,"AuthProvider"],[125,17,26,28],[126,2,26,28,"_c"],[126,4,26,28],[126,7,26,16,"AuthProvider"],[126,19,26,28],[127,2,123,7],[127,11,123,16,"useAuth"],[127,18,123,23,"useAuth"],[127,19,123,23],[127,21,123,26],[128,4,123,26,"_s2"],[128,7,123,26],[129,4,124,2],[129,10,124,8,"context"],[129,17,124,15],[129,20,124,18],[129,24,124,18,"useContext"],[129,30,124,28],[129,31,124,28,"useContext"],[129,41,124,28],[129,43,124,29,"AuthContext"],[129,54,124,40],[129,55,124,41],[130,4,125,2],[130,8,125,6],[130,9,125,7,"context"],[130,16,125,14],[130,18,125,16],[131,6,126,4],[131,12,126,10],[131,16,126,14,"Error"],[131,21,126,19],[131,22,126,20],[131,64,126,62],[131,65,126,63],[132,4,127,2],[133,4,128,2],[133,11,128,9,"context"],[133,18,128,16],[134,2,129,0],[135,2,129,1,"_s2"],[135,5,129,1],[135,6,123,16,"useAuth"],[135,13,123,23],[136,2,123,23],[136,6,123,23,"_c"],[136,8,123,23],[137,2,123,23,"$RefreshReg$"],[137,14,123,23],[137,15,123,23,"_c"],[137,17,123,23],[138,0,123,23],[138,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","updateProfile","useAuth"],"mappings":"AAA;OCyB;YCK;GDE;yBEE;GFe;gBGE;GHc;mBIE;GJc;iBKE;GLM;wBME;GNW;CDkB;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}